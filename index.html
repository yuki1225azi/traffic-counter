<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>スマート人数カウンター</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-cpu"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>

<link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="container">
  <div id="app-title">スマート人数カウンター</div>
  <div id="status-indicator">
    <div id="loading-model">AIモデル読込中... <span id="loading-percentage">0%</span></div>
    <progress id="loading-progress" max="100" value="0"></progress>
  </div>
  <div id="video-container">
    <video id="video" autoplay muted playsinline></video>
    <canvas id="canvas"></canvas>
  </div>
  <div id="main-controls-area">
    <div id="controls">
      <button class="btn btn-green" disabled id="toggle-analysis-btn">測定開始</button>
    </div>
    <div id="count-display-area">
      <p>現在の人数: <span id="person-count">0</span>人</p>
    </div>
  </div>
  <div id="log-display">
    <table id="log-table">
      <thead><tr><th>日時</th><th>人数</th></tr></thead>
      <tbody id="log-body"></tbody>
    </table>
  </div>
  <div id="toast" class="hidden"></div>
</div>

<script src="script.js" defer></script>
</body>
</html>
